<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Class file_lock</title>
<link rel="stylesheet" href="../../boostbook.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.74.3">
<link rel="home" href="../../index.html" title="The Boost C++ Libraries BoostBook Documentation Subset">
<link rel="up" href="../../boost_interprocess_reference.html#header.boost.interprocess.sync.file_lock_hpp" title="Header &lt;boost/interprocess/sync/file_lock.hpp&gt;">
<link rel="prev" href="basic_vectorstream.html" title="Class template basic_vectorstream">
<link rel="next" href="barrier.html" title="Class barrier">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table cellpadding="2" width="100%"><tr>
<td valign="top"><img alt="Boost C++ Libraries" width="277" height="86" src="../../../../boost.png"></td>
<td align="center"><a href="../../../../index.html">Home</a></td>
<td align="center"><a href="../../../../libs/libraries.htm">Libraries</a></td>
<td align="center"><a href="http://www.boost.org/users/people.html">People</a></td>
<td align="center"><a href="http://www.boost.org/users/faq.html">FAQ</a></td>
<td align="center"><a href="../../../../more/index.htm">More</a></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="basic_vectorstream.html"><img src="../../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../../boost_interprocess_reference.html#header.boost.interprocess.sync.file_lock_hpp"><img src="../../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="barrier.html"><img src="../../../../doc/html/images/next.png" alt="Next"></a>
</div>
<div class="refentry" lang="en">
<a name="boost.interprocess.file_lock"></a><div class="titlepage"></div>
<div class="refnamediv">
<h2><span class="refentrytitle">Class file_lock</span></h2>
<p>boost::interprocess::file_lock</p>
</div>
<h2 xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="refsynopsisdiv-title">Synopsis</h2>
<div xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" class="refsynopsisdiv"><pre class="synopsis"><span class="emphasis"><em>// In header: &lt;<a class="link" href="../../boost_interprocess_reference.html#header.boost.interprocess.sync.file_lock_hpp" title="Header &lt;boost/interprocess/sync/file_lock.hpp&gt;">boost/interprocess/sync/file_lock.hpp</a>&gt;

</em></span>
<span class="bold"><strong>class</strong></span> <a class="link" href="file_lock.html" title="Class file_lock">file_lock</a> {
<span class="bold"><strong>public</strong></span>:
  <span class="emphasis"><em>// <a class="link" href="file_lock.html#boost.interprocess.file_lockconstruct-copy-destruct">construct/copy/destruct</a></em></span>
  <a class="link" href="file_lock.html#id1772054-bb">file_lock</a>();
  <a class="link" href="file_lock.html#id1772059-bb">file_lock</a>(<span class="bold"><strong>const</strong></span> <span class="bold"><strong>char</strong></span> *);
  <a class="link" href="file_lock.html#id1772071-bb">file_lock</a>(<a class="link" href="file_lock.html" title="Class file_lock">file_lock</a> &amp;&amp;);
  file_lock&amp; <a class="link" href="file_lock.html#id1772086-bb"><span class="bold"><strong>operator</strong></span>=</a>(<a class="link" href="file_lock.html" title="Class file_lock">file_lock</a> &amp;&amp;);
  <a class="link" href="file_lock.html#id1772101-bb">~file_lock</a>();

  <span class="emphasis"><em>// <a class="link" href="file_lock.html#id1771893-bb">public member functions</a></em></span>
  <span class="type"><span class="bold"><strong>void</strong></span></span> <a class="link" href="file_lock.html#id1771897-bb">swap</a>(<a class="link" href="file_lock.html" title="Class file_lock">file_lock</a> &amp;) ;
  <span class="type"><span class="bold"><strong>void</strong></span></span> <a class="link" href="file_lock.html#id1771916-bb">lock</a>() ;
  <span class="type"><span class="bold"><strong>bool</strong></span></span> <a class="link" href="file_lock.html#id1771931-bb">try_lock</a>() ;
  <span class="type"><span class="bold"><strong>bool</strong></span></span> <a class="link" href="file_lock.html#id1771948-bb">timed_lock</a>(<span class="bold"><strong>const</strong></span> boost::posix_time::ptime &amp;) ;
  <span class="type"><span class="bold"><strong>void</strong></span></span> <a class="link" href="file_lock.html#id1771970-bb">unlock</a>() ;
  <span class="type"><span class="bold"><strong>void</strong></span></span> <a class="link" href="file_lock.html#id1771985-bb">lock_sharable</a>() ;
  <span class="type"><span class="bold"><strong>bool</strong></span></span> <a class="link" href="file_lock.html#id1772000-bb">try_lock_sharable</a>() ;
  <span class="type"><span class="bold"><strong>bool</strong></span></span> <a class="link" href="file_lock.html#id1772016-bb">timed_lock_sharable</a>(<span class="bold"><strong>const</strong></span> boost::posix_time::ptime &amp;) ;
  <span class="type"><span class="bold"><strong>void</strong></span></span> <a class="link" href="file_lock.html#id1772039-bb">unlock_sharable</a>() ;
};</pre></div>
<div class="refsect1" lang="en">
<a name="id2226976"></a><h2>Description</h2>
<p>A file lock, is a mutual exclusion utility similar to a mutex using a file. A file lock has sharable and exclusive locking capabilities and can be used with scoped_lock and sharable_lock classes. A file lock can't guarantee synchronization between threads of the same process so just use file locks to synchronize threads from different processes. </p>
<div class="refsect2" lang="en">
<a name="id2226988"></a><h3>
<a name="boost.interprocess.file_lockconstruct-copy-destruct"></a><code class="computeroutput">file_lock</code> 
        public
       construct/copy/destruct</h3>
<div class="orderedlist"><ol type="1">
<li>
<pre class="literallayout"><a name="id1772054-bb"></a>file_lock();</pre>
<p>Constructs an empty file mapping. Does not throw </p>
</li>
<li>
<pre class="literallayout"><a name="id1772059-bb"></a>file_lock(<span class="bold"><strong>const</strong></span> <span class="bold"><strong>char</strong></span> * name);</pre>
<p>Opens a file lock. Throws interprocess_exception if the file does not exist or there are no operating system resources. </p>
</li>
<li>
<pre class="literallayout"><a name="id1772071-bb"></a>file_lock(<a class="link" href="file_lock.html" title="Class file_lock">file_lock</a> &amp;&amp; moved);</pre>
<p>Moves the ownership of "moved"'s file mapping object to *this. After the call, "moved" does not represent any file mapping object. Does not throw </p>
</li>
<li>
<pre class="literallayout">file_lock&amp; <a name="id1772086-bb"></a><span class="bold"><strong>operator</strong></span>=(<a class="link" href="file_lock.html" title="Class file_lock">file_lock</a> &amp;&amp; moved);</pre>
<p>Moves the ownership of "moved"'s file mapping to *this. After the call, "moved" does not represent any file mapping. Does not throw </p>
</li>
<li>
<pre class="literallayout"><a name="id1772101-bb"></a>~file_lock();</pre>Closes a file lock. Does not throw. </li>
</ol></div>
</div>
<div class="refsect2" lang="en">
<a name="id2227126"></a><h3>
<a name="id1771893-bb"></a><code class="computeroutput">file_lock</code> public member functions</h3>
<div class="orderedlist"><ol type="1">
<li>
<pre class="literallayout"><span class="type"><span class="bold"><strong>void</strong></span></span> <a name="id1771897-bb"></a>swap(<a class="link" href="file_lock.html" title="Class file_lock">file_lock</a> &amp; other) ;</pre>
<p>Swaps two file_locks. Does not throw. </p>
</li>
<li>
<pre class="literallayout"><span class="type"><span class="bold"><strong>void</strong></span></span> <a name="id1771916-bb"></a>lock() ;</pre>
<p>Effects: The calling thread tries to obtain exclusive ownership of the mutex, and if another thread has exclusive, or sharable ownership of the mutex, it waits until it can obtain the ownership. Throws: interprocess_exception on error. </p>
</li>
<li>
<pre class="literallayout"><span class="type"><span class="bold"><strong>bool</strong></span></span> <a name="id1771931-bb"></a>try_lock() ;</pre>
<p>Effects: The calling thread tries to acquire exclusive ownership of the mutex without waiting. If no other thread has exclusive, or sharable ownership of the mutex this succeeds. Returns: If it can acquire exclusive ownership immediately returns true. If it has to wait, returns false. Throws: interprocess_exception on error. </p>
</li>
<li>
<pre class="literallayout"><span class="type"><span class="bold"><strong>bool</strong></span></span> <a name="id1771948-bb"></a>timed_lock(<span class="bold"><strong>const</strong></span> boost::posix_time::ptime &amp; abs_time) ;</pre>
<p>Effects: The calling thread tries to acquire exclusive ownership of the mutex waiting if necessary until no other thread has has exclusive, or sharable ownership of the mutex or abs_time is reached. Returns: If acquires exclusive ownership, returns true. Otherwise returns false. Throws: interprocess_exception on error. </p>
</li>
<li>
<pre class="literallayout"><span class="type"><span class="bold"><strong>void</strong></span></span> <a name="id1771970-bb"></a>unlock() ;</pre>
<p>Precondition: The thread must have exclusive ownership of the mutex. Effects: The calling thread releases the exclusive ownership of the mutex. Throws: An exception derived from interprocess_exception on error. </p>
</li>
<li>
<pre class="literallayout"><span class="type"><span class="bold"><strong>void</strong></span></span> <a name="id1771985-bb"></a>lock_sharable() ;</pre>
<p>Effects: The calling thread tries to obtain sharable ownership of the mutex, and if another thread has exclusive ownership of the mutex, waits until it can obtain the ownership. Throws: interprocess_exception on error. </p>
</li>
<li>
<pre class="literallayout"><span class="type"><span class="bold"><strong>bool</strong></span></span> <a name="id1772000-bb"></a>try_lock_sharable() ;</pre>
<p>Effects: The calling thread tries to acquire sharable ownership of the mutex without waiting. If no other thread has has exclusive ownership of the mutex this succeeds. Returns: If it can acquire sharable ownership immediately returns true. If it has to wait, returns false. Throws: interprocess_exception on error. </p>
</li>
<li>
<pre class="literallayout"><span class="type"><span class="bold"><strong>bool</strong></span></span> <a name="id1772016-bb"></a>timed_lock_sharable(<span class="bold"><strong>const</strong></span> boost::posix_time::ptime &amp; abs_time) ;</pre>
<p>Effects: The calling thread tries to acquire sharable ownership of the mutex waiting if necessary until no other thread has has exclusive ownership of the mutex or abs_time is reached. Returns: If acquires sharable ownership, returns true. Otherwise returns false. Throws: interprocess_exception on error. </p>
</li>
<li>
<pre class="literallayout"><span class="type"><span class="bold"><strong>void</strong></span></span> <a name="id1772039-bb"></a>unlock_sharable() ;</pre>
<p>Precondition: The thread must have sharable ownership of the mutex. Effects: The calling thread releases the sharable ownership of the mutex. Throws: An exception derived from interprocess_exception on error. </p>
</li>
</ol></div>
</div>
</div>
</div>
<table xmlns:rev="http://www.cs.rpi.edu/~gregod/boost/tools/doc/revision" width="100%"><tr>
<td align="left"></td>
<td align="right"><div class="copyright-footer">Copyright © 2005 - 2008 Ion Gaztañaga<p>
        Distributed under the Boost Software License, Version 1.0. (See accompanying
        file LICENSE_1_0.txt or copy at <a href="http://www.boost.org/LICENSE_1_0.txt" target="_top">http://www.boost.org/LICENSE_1_0.txt</a>)
      </p>
</div></td>
</tr></table>
<hr>
<div class="spirit-nav">
<a accesskey="p" href="basic_vectorstream.html"><img src="../../../../doc/html/images/prev.png" alt="Prev"></a><a accesskey="u" href="../../boost_interprocess_reference.html#header.boost.interprocess.sync.file_lock_hpp"><img src="../../../../doc/html/images/up.png" alt="Up"></a><a accesskey="h" href="../../index.html"><img src="../../../../doc/html/images/home.png" alt="Home"></a><a accesskey="n" href="barrier.html"><img src="../../../../doc/html/images/next.png" alt="Next"></a>
</div>
</body>
</html>
